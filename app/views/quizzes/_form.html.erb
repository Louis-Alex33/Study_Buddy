<%= simple_form_for quiz, url: quizzes_path, html: { data: { controller: "quiz-form" } } do |f| %>
  <div class="modal-body modal-body-padded">
    <%= f.input :title, label: "Titre de votre défi", placeholder: "Ex: Check tes maths bro...", required: true, wrapper_html: { class: "form-group-modal" } %>
    <%= f.association :category, label: "Catégorie", prompt: "Sélectionnez une catégorie", required: true, wrapper_html: { class: "form-group-modal" } %>

    <%= f.input :status, as: :select, collection: [["Public - Visible par tous", "public"], ["Partagé - Avec des amis", "shared"]], label: "Type de quiz", required: true, wrapper_html: { class: "form-group-modal" }, input_html: { data: { quiz_form_target: "statusSelect", action: "change->quiz-form#toggleFriends" } } %>

    <div class="form-group-modal friends-checkboxes" data-quiz-form-target="friendsSection" style="display: none;">
      <label>Invite tes amis</label>
      <div class="check_boxes">
        <% current_user.friends.each do |friend| %>
          <div class="form-check">
            <%= check_box_tag "invited_user_ids[]", friend.id, false, id: "friend_#{friend.id}", class: "form-check-input" %>
            <%= label_tag "friend_#{friend.id}", friend.display_name, class: "form-check-label" %>
          </div>
        <% end %>
      </div>
    </div>

    <%= f.input :level, as: :radio_buttons, collection: (1..5).map { |n| ["Niveau #{n}", n] }, label: "Niveau de difficulté", required: true, wrapper_html: { class: "form-group-modal level-radio-group" } %>
  </div>

  <div class="modal-footer modal-footer-centered">
    <button type="button" data-bs-dismiss="modal" class="btn-cancel">Annuler</button>
    <%= f.submit "Créer un défi", class: "btn-submit" %>
  </div>
<% end %>