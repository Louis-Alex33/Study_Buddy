<!-- Animated Study Background -->
<div class="home-background">
  <div class="floating-icons">
    <!-- Book icon -->
    <div class="floating-icon size-lg icon-1 glow">
      <svg viewBox="0 0 24 24">
        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
      </svg>
    </div>
    <!-- Pen icon -->
    <div class="floating-icon size-md icon-2">
      <svg viewBox="0 0 24 24">
        <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
        <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
        <path d="M2 2l7.586 7.586"></path>
      </svg>
    </div>
    <!-- Flashcard / Card icon -->
    <div class="floating-icon size-lg icon-3">
      <svg viewBox="0 0 24 24">
        <rect x="2" y="4" width="20" height="16" rx="2"></rect>
        <line x1="6" y1="8" x2="18" y2="8"></line>
        <line x1="6" y1="12" x2="14" y2="12"></line>
      </svg>
    </div>
    <!-- Graduation cap -->
    <div class="floating-icon size-md icon-4 glow">
      <svg viewBox="0 0 24 24">
        <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
        <path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"></path>
      </svg>
    </div>
    <!-- Notepad icon -->
    <div class="floating-icon size-sm icon-5">
      <svg viewBox="0 0 24 24">
        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
      </svg>
    </div>
    <!-- Lightbulb / Idea -->
    <div class="floating-icon size-md icon-6">
      <svg viewBox="0 0 24 24">
        <path d="M9 18h6"></path>
        <path d="M10 22h4"></path>
        <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"></path>
      </svg>
    </div>
    <!-- Pencil -->
    <div class="floating-icon size-lg icon-7 glow">
      <svg viewBox="0 0 24 24">
        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
      </svg>
    </div>
    <!-- Open book -->
    <div class="floating-icon size-sm icon-8">
      <svg viewBox="0 0 24 24">
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
      </svg>
    </div>
    <!-- Bookmark -->
    <div class="floating-icon size-md icon-9">
      <svg viewBox="0 0 24 24">
        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
      </svg>
    </div>
    <!-- Brain / Learning -->
    <div class="floating-icon size-lg icon-10">
      <svg viewBox="0 0 24 24">
        <path d="M12 2a4 4 0 0 0-4 4v1a3 3 0 0 0-3 3v1a3 3 0 0 0 0 6v1a3 3 0 0 0 3 3v1a4 4 0 0 0 8 0v-1a3 3 0 0 0 3-3v-1a3 3 0 0 0 0-6v-1a3 3 0 0 0-3-3V6a4 4 0 0 0-4-4z"></path>
      </svg>
    </div>
    <!-- Clock / Study time -->
    <div class="floating-icon size-sm icon-11 glow">
      <svg viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
    </div>
    <!-- Star / Achievement -->
    <div class="floating-icon size-md icon-12">
      <svg viewBox="0 0 24 24">
        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
      </svg>
    </div>
  </div>
</div>
<!-- Main Content -->
<div class="home-content">
  <!-- Hero Section -->
  <div class="hero-section">
    <p class="hero-tagline">Votre compagnon d'étude intelligent</p>
    <h1 class="hero-title">Bienvenue sur <span class="hero-highlight">Study Buddy</span></h1>
    <p class="hero-subtitle">
      Transformez vos cours en expériences d'apprentissage interactives.<br>
      <strong>Organisez</strong> vos documents, <strong>créez</strong> des flashcards personnalisées<br>
      et <strong>boostez</strong> votre réussite grâce à l'intelligence artificielle.
    </p>
    <div class="hero-features">
      <div class="hero-feature">
        <i class="fas fa-folder-open"></i>
        <span>Organisation intuitive</span>
      </div>
      <div class="hero-feature">
        <i class="fas fa-brain"></i>
        <span>IA intégrée</span>
      </div>
      <div class="hero-feature">
        <i class="fas fa-layer-group"></i>
        <span>Flashcards intelligentes</span>
      </div>
    </div>
    <button type="button" class="btn btn-upload-document" data-bs-toggle="modal" data-bs-target="#uploadModal">
      <i class="fas fa-cloud-upload-alt"></i> Télécharger un document
    </button>
  </div>
  <!-- Categories Section -->
  <% if @categories&.any? %>
    <div class="categories-section">
      <h3 class="section-title">Mes catégories</h3>
      <div class="categories-grid">
        <% @categories.each do |category| %>
          <div class="category-card">
            <div class="category-card-icon">
              <i class="fas fa-folder"></i>
            </div>
            <div class="category-card-content">
              <h5 class="category-card-title"><%= category.title %></h5>
              <span class="category-card-count"><%= category.lectures.count %> lecture(s)</span>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% else %>
    <div class="empty-state">
      <div class="empty-state-icon">
        <i class="fas fa-book-open"></i>
      </div>
      <p class="empty-state-text">
        Commencez par télécharger votre premier document pour créer votre première catégorie
      </p>
    </div>
  <% end %>
</div>

<!-- Modal pour uploader un document -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header modal-header-gradient">
        <div>
          <h5 class="modal-title">Telecharger un document</h5>
          <p class="modal-subtitle">Creez une nouvelle lecture a partir de votre fichier</p>
        </div>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <%= form_with model: Lecture.new, url: lectures_path, local: true, multipart: true do |f| %>
        <div class="modal-body modal-body-padded">
          <!-- Titre -->
          <div class="form-group-modal">
            <%= f.label :title, "Titre de la lecture" %>
            <%= f.text_field :title, placeholder: "Ex: Cours de mathematiques", required: true %>
          </div>

          <!-- Categorie -->
          <div class="form-group-modal">
            <%= f.label :category_id, "Categorie" %>
            <%= f.collection_select :category_id, Category.all, :id, :title, { prompt: "Selectionnez une categorie" }, { required: true } %>
          </div>

          <!-- fichier -->
          <div class="form-group-modal">
            <%= f.label :document, "Document (PDF, image, audio)" %>
            <%= f.file_field :document, accept: "application/pdf,image/*,audio/*", required: true %>
            <small>Formats acceptes: PDF, images (JPG, PNG), audio (MP3, WAV)</small>
          </div>

          <!-- Resume -->
          <div class="form-group-modal">
            <%= f.label :resume, "Resume (optionnel)" %>
            <%= f.text_area :resume, rows: 3, placeholder: "Ajoutez un bref resume de la lecture..." %>
          </div>
        </div>

        <div class="modal-footer modal-footer-centered">
          <button type="button" data-bs-dismiss="modal" class="btn-cancel">Annuler</button>
          <%= f.submit "Creer la lecture", class: "btn-submit" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
